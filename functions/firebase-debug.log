[debug] [2025-08-31T00:23:28.988Z] ----------------------------------------------------------------------
[debug] [2025-08-31T00:23:28.990Z] Command:       /opt/homebrew/Cellar/node/24.7.0/bin/node /opt/homebrew/bin/firebase deploy --only functions
[debug] [2025-08-31T00:23:28.990Z] CLI Version:   14.15.1
[debug] [2025-08-31T00:23:28.990Z] Platform:      darwin
[debug] [2025-08-31T00:23:28.990Z] Node Version:  v24.7.0
[debug] [2025-08-31T00:23:28.990Z] Time:          Sat Aug 30 2025 20:23:28 GMT-0400 (Atlantic Standard Time)
[debug] [2025-08-31T00:23:28.990Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-08-31T00:23:29.103Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-08-31T00:23:29.103Z] > authorizing via signed-in user (jordancobb92@gmail.com)
[debug] [2025-08-31T00:23:29.103Z] [iam] checking project mda-database for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-08-31T00:23:29.103Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:29.103Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:29.104Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/mda-database:testIamPermissions [none]
[debug] [2025-08-31T00:23:29.104Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/mda-database:testIamPermissions x-goog-quota-user=projects/mda-database
[debug] [2025-08-31T00:23:29.104Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/mda-database:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-08-31T00:23:29.402Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/mda-database:testIamPermissions 200
[debug] [2025-08-31T00:23:29.402Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/mda-database:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-08-31T00:23:29.402Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:29.402Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:29.402Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/mda-database/serviceAccounts/mda-database@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-08-31T00:23:29.402Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/mda-database/serviceAccounts/mda-database@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-08-31T00:23:29.739Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/mda-database/serviceAccounts/mda-database@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-08-31T00:23:29.739Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/mda-database/serviceAccounts/mda-database@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'mda-database'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] âœ”  functions: Finished running predeploy script. 
[debug] [2025-08-31T00:23:33.417Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:33.417Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:33.418Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/mda-database [none]
[debug] [2025-08-31T00:23:33.574Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/mda-database 200
[debug] [2025-08-31T00:23:33.574Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/mda-database {"projectNumber":"289133861766","projectId":"mda-database","lifecycleState":"ACTIVE","name":"MDA Database","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-08-20T00:29:34.472155Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-08-31T00:23:33.576Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:33.576Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:33.576Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/mda-database/adminSdkConfig [none]
[debug] [2025-08-31T00:23:33.960Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/mda-database/adminSdkConfig 200
[debug] [2025-08-31T00:23:33.960Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/mda-database/adminSdkConfig {"projectId":"mda-database","storageBucket":"mda-database.firebasestorage.app"}
[debug] [2025-08-31T00:23:33.961Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:33.961Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:33.961Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/mda-database/configs [none]
[debug] [2025-08-31T00:23:34.244Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/mda-database/configs 200
[debug] [2025-08-31T00:23:34.244Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/mda-database/configs {}
[debug] [2025-08-31T00:23:34.248Z] Validating nodejs source
[debug] [2025-08-31T00:23:34.891Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@sendgrid/mail": "^8.1.5",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.4.0",
    "node-fetch": "^3.3.2"
  },
  "devDependencies": {
    "@types/node-fetch": "^2.6.13",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^5.9.2"
  },
  "private": true
}
[debug] [2025-08-31T00:23:34.892Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-08-31T00:23:34.893Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-31T00:23:34.900Z] Found firebase-functions binary at '/Users/moguljordan23/Desktop/NEw dashboard/client-dashboard/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8594

[debug] [2025-08-31T00:23:35.238Z] Got response from /__/functions.yaml {"endpoints":{"webhookHandler":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY"},{"key":"NOTIFY_TO"}],"labels":{},"httpsTrigger":{},"entryPoint":"webhookHandler"},"notifyOnNewComment":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY"},{"key":"NOTIFY_TO"}],"labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{uid}/projects/{projectId}/comments/{commentId}"},"retry":false},"entryPoint":"notifyOnNewComment"},"notifyOnNewTask":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY"},{"key":"NOTIFY_TO"}],"labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{uid}/projects/{projectId}/tasks/{taskId}"},"retry":false},"entryPoint":"notifyOnNewTask"},"notifyOnProjectStatusChange":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY"},{"key":"NOTIFY_TO"}],"labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.updated","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{uid}/projects/{projectId}"},"retry":false},"entryPoint":"notifyOnProjectStatusChange"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"type":"secret","name":"SENDGRID_API_KEY"},{"type":"secret","name":"NOTIFY_TO"}]}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-08-31T00:23:39.262Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-08-31T00:23:39.262Z] > authorizing via signed-in user (jordancobb92@gmail.com)
[debug] [2025-08-31T00:23:39.262Z] [iam] checking project mda-database for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-08-31T00:23:39.262Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:39.262Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:39.262Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/mda-database:testIamPermissions [none]
[debug] [2025-08-31T00:23:39.262Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/mda-database:testIamPermissions x-goog-quota-user=projects/mda-database
[debug] [2025-08-31T00:23:39.262Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/mda-database:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-08-31T00:23:39.559Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/mda-database:testIamPermissions 200
[debug] [2025-08-31T00:23:39.560Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/mda-database:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-08-31T00:23:39.561Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:39.561Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:39.561Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/mda-database/instances pageSize=100&pageToken=
[debug] [2025-08-31T00:23:40.092Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/mda-database/instances 200
[debug] [2025-08-31T00:23:40.092Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/mda-database/instances {}
[debug] [2025-08-31T00:23:40.094Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:40.094Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:40.094Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY [none]
[debug] [2025-08-31T00:23:40.410Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY 200
[debug] [2025-08-31T00:23:40.410Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY {"name":"projects/289133861766/secrets/SENDGRID_API_KEY","replication":{"automatic":{}},"createTime":"2025-08-30T23:08:53.828657Z","labels":{"firebase-managed":"functions"},"etag":"\"163d9d38ea52a1\""}
[debug] [2025-08-31T00:23:40.411Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:40.411Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:40.411Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY/versions/latest [none]
[debug] [2025-08-31T00:23:40.563Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY/versions/latest 200
[debug] [2025-08-31T00:23:40.563Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY/versions/latest {"name":"projects/289133861766/secrets/SENDGRID_API_KEY/versions/2","createTime":"2025-08-30T23:12:11.335724Z","state":"ENABLED","replicationStatus":{"automatic":{}},"etag":"\"163d9d44a8c82c\""}
[debug] [2025-08-31T00:23:40.563Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:40.563Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:40.564Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO [none]
[debug] [2025-08-31T00:23:40.686Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO 200
[debug] [2025-08-31T00:23:40.687Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO {"name":"projects/289133861766/secrets/NOTIFY_TO","replication":{"automatic":{}},"createTime":"2025-08-31T00:21:09.351670Z","labels":{"firebase-managed":"functions"},"etag":"\"163d9e3b52e558\""}
[debug] [2025-08-31T00:23:40.687Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:40.687Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:40.688Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO/versions/latest [none]
[debug] [2025-08-31T00:23:40.821Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO/versions/latest 200
[debug] [2025-08-31T00:23:40.822Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO/versions/latest {"name":"projects/289133861766/secrets/NOTIFY_TO/versions/2","createTime":"2025-08-31T00:23:20.488065Z","state":"ENABLED","replicationStatus":{"automatic":{}},"etag":"\"163d9e431ee081\""}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/moguljordan23/Desktop/NEw dashboard/client-dashboard/functions (106.98 KB) for uploading 
[debug] [2025-08-31T00:23:40.864Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:40.864Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:40.864Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/mda-database/locations/-/functions [none]
[debug] [2025-08-31T00:23:41.527Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/mda-database/locations/-/functions 200
[debug] [2025-08-31T00:23:41.527Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/mda-database/locations/-/functions {}
[debug] [2025-08-31T00:23:41.528Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:41.528Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:41.529Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-08-31T00:23:42.087Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/-/functions 200
[debug] [2025-08-31T00:23:42.088Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/-/functions {"functions":[{"name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"build":"projects/289133861766/locations/us-central1/builds/b6beda6f-aadc-4d2b-b9d6-9386fe0ef2fd","runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-08-23T15:55:44.712972258Z","labels":{"firebase-functions-hash":"7e2dfbcb43499ef1256441f434b64b0fcbb8782f","deployment-tool":"cli-firebase"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","createTime":"2025-08-22T21:15:42.040034541Z","satisfiesPzi":true}]}
[debug] [2025-08-31T00:23:42.088Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:42.089Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:42.089Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/mda-database/databases/(default) [none]
[debug] [2025-08-31T00:23:42.651Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/mda-database/databases/(default) 200
[debug] [2025-08-31T00:23:42.651Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/mda-database/databases/(default) {"name":"projects/mda-database/databases/(default)","uid":"de52a326-9085-4865-8b6e-a16983b660ce","createTime":"2025-08-20T18:26:18.395869Z","updateTime":"2025-08-20T18:26:18.395869Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-08-30T23:23:42.606169Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","backupConfig":{"backupSchedulesEnabled":true},"databaseEdition":"STANDARD","freeTier":true,"etag":"IKe3waPks48DMKDy7+3grY8D"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-08-31T00:23:42.655Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:42.655Z] Checked if tokens are valid: true, expires at: 1756602805101
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-08-31T00:23:42.655Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:42.655Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:42.655Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/289133861766/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-08-31T00:23:42.655Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/289133861766/services/pubsub.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/289133861766
[debug] [2025-08-31T00:23:42.655Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/289133861766/services/pubsub.googleapis.com:generateServiceIdentity {}
[debug] [2025-08-31T00:23:42.656Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/289133861766/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-08-31T00:23:42.656Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/289133861766/services/eventarc.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/289133861766
[debug] [2025-08-31T00:23:42.656Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/289133861766/services/eventarc.googleapis.com:generateServiceIdentity {}
[debug] [2025-08-31T00:23:43.236Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/289133861766/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-08-31T00:23:43.236Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/289133861766/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-289133861766@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"107253922055669081005"}}
[debug] [2025-08-31T00:23:43.246Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/289133861766/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-08-31T00:23:43.246Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/289133861766/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-289133861766@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"118152795597925602910"}}
[info] i  functions: ensuring required API secretmanager.googleapis.com is enabled... 
[debug] [2025-08-31T00:23:43.247Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:43.247Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:43.247Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/289133861766/services/secretmanager.googleapis.com [none]
[debug] [2025-08-31T00:23:43.247Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/289133861766/services/secretmanager.googleapis.com x-goog-quota-user=projects/289133861766
[debug] [2025-08-31T00:23:43.571Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/289133861766/services/secretmanager.googleapis.com 200
[debug] [2025-08-31T00:23:43.571Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/289133861766/services/secretmanager.googleapis.com [omitted]
[info] âœ”  functions: required API secretmanager.googleapis.com is enabled 
[debug] [2025-08-31T00:23:43.582Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:43.583Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:43.583Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:43.583Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:43.583Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY/versions/latest [none]
[debug] [2025-08-31T00:23:43.583Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO/versions/latest [none]
[debug] [2025-08-31T00:23:43.711Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY/versions/latest 200
[debug] [2025-08-31T00:23:43.711Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY/versions/latest {"name":"projects/289133861766/secrets/SENDGRID_API_KEY/versions/2","createTime":"2025-08-30T23:12:11.335724Z","state":"ENABLED","replicationStatus":{"automatic":{}},"etag":"\"163d9d44a8c82c\""}
[debug] [2025-08-31T00:23:43.711Z] Resolved secret version of SENDGRID_API_KEY to 2.
[debug] [2025-08-31T00:23:43.950Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO/versions/latest 200
[debug] [2025-08-31T00:23:43.950Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO/versions/latest {"name":"projects/289133861766/secrets/NOTIFY_TO/versions/2","createTime":"2025-08-31T00:23:20.488065Z","state":"ENABLED","replicationStatus":{"automatic":{}},"etag":"\"163d9e431ee081\""}
[debug] [2025-08-31T00:23:43.950Z] Resolved secret version of NOTIFY_TO to 2.
[debug] [2025-08-31T00:23:43.951Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:43.951Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:43.951Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/289133861766 [none]
[debug] [2025-08-31T00:23:44.302Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/289133861766 403
[debug] [2025-08-31T00:23:44.303Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/289133861766 {"error":{"code":403,"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766","serviceTitle":"Compute Engine API","consumer":"projects/289133861766","service":"compute.googleapis.com","containerInfo":"289133861766"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}]}]}}
[debug] [2025-08-31T00:23:44.303Z] unable to look up default compute service account. Falling back to 289133861766-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766","serviceTitle":"Compute Engine API","consumer":"projects/289133861766","service":"compute.googleapis.com","containerInfo":"289133861766"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/289133861766 had HTTP Error: 403, Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-08-31T00:23:44.304Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:44.304Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:44.304Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/289133861766:getIamPolicy [none]
[debug] [2025-08-31T00:23:44.538Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/289133861766:getIamPolicy 200
[debug] [2025-08-31T00:23:44.539Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/289133861766:getIamPolicy {"version":1,"etag":"BwY8+rA/GAw=","bindings":[{"role":"roles/artifactregistry.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-artifactregistry.iam.gserviceaccount.com"]},{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:289133861766@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-289133861766@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-289133861766@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com","serviceAccount:289133861766@cloudservices.gserviceaccount.com","serviceAccount:mda-database@appspot.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:service-289133861766@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com"]},{"role":"roles/firebasemods.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-firebasemods.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-289133861766@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:JordanCobb92@gmail.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-289133861766@serverless-robot-prod.iam.gserviceaccount.com"]}]}
[debug] [2025-08-31T00:23:44.540Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:44.540Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:44.540Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/289133861766:setIamPolicy [none]
[debug] [2025-08-31T00:23:44.540Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/289133861766:setIamPolicy {"policy":{"version":1,"etag":"BwY8+rA/GAw=","bindings":[{"role":"roles/artifactregistry.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-artifactregistry.iam.gserviceaccount.com"]},{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:289133861766@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-289133861766@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-289133861766@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com","serviceAccount:289133861766@cloudservices.gserviceaccount.com","serviceAccount:mda-database@appspot.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:service-289133861766@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com"]},{"role":"roles/firebasemods.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-firebasemods.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-289133861766@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com","serviceAccount:service-289133861766@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:JordanCobb92@gmail.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-289133861766@serverless-robot-prod.iam.gserviceaccount.com"]},{"role":"roles/run.invoker","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com"]}]},"updateMask":"bindings"}
[debug] [2025-08-31T00:23:45.410Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/289133861766:setIamPolicy 200
[debug] [2025-08-31T00:23:45.410Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/289133861766:setIamPolicy {"version":1,"etag":"BwY9nkSbEhQ=","bindings":[{"role":"roles/artifactregistry.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-artifactregistry.iam.gserviceaccount.com"]},{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:289133861766@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-289133861766@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-289133861766@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com","serviceAccount:289133861766@cloudservices.gserviceaccount.com","serviceAccount:mda-database@appspot.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:service-289133861766@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com"]},{"role":"roles/firebasemods.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-firebasemods.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-289133861766@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-289133861766@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-fbsvc@mda-database.iam.gserviceaccount.com","serviceAccount:service-289133861766@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:JordanCobb92@gmail.com"]},{"role":"roles/run.invoker","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-289133861766@serverless-robot-prod.iam.gserviceaccount.com"]}]}
[debug] [2025-08-31T00:23:45.410Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:45.410Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:45.410Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/mda-database [none]
[debug] [2025-08-31T00:23:45.571Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/mda-database 200
[debug] [2025-08-31T00:23:45.571Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/mda-database {"projectNumber":"289133861766","projectId":"mda-database","lifecycleState":"ACTIVE","name":"MDA Database","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-08-20T00:29:34.472155Z"}
[debug] [2025-08-31T00:23:45.571Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:45.572Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:45.572Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/289133861766 [none]
[debug] [2025-08-31T00:23:45.686Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/289133861766 403
[debug] [2025-08-31T00:23:45.686Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/289133861766 {"error":{"code":403,"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"289133861766","service":"compute.googleapis.com","consumer":"projects/289133861766","serviceTitle":"Compute Engine API","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}]}]}}
[debug] [2025-08-31T00:23:45.686Z] unable to look up default compute service account. Falling back to 289133861766-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"289133861766","service":"compute.googleapis.com","consumer":"projects/289133861766","serviceTitle":"Compute Engine API","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/289133861766 had HTTP Error: 403, Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-08-31T00:23:45.687Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:45.687Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:45.687Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/289133861766 [none]
[debug] [2025-08-31T00:23:45.831Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/289133861766 403
[debug] [2025-08-31T00:23:45.831Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/289133861766 {"error":{"code":403,"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766","containerInfo":"289133861766","service":"compute.googleapis.com","serviceTitle":"Compute Engine API","consumer":"projects/289133861766"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}]}]}}
[debug] [2025-08-31T00:23:45.832Z] unable to look up default compute service account. Falling back to 289133861766-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766","containerInfo":"289133861766","service":"compute.googleapis.com","serviceTitle":"Compute Engine API","consumer":"projects/289133861766"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/289133861766 had HTTP Error: 403, Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-08-31T00:23:45.833Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:45.833Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:45.833Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/289133861766 [none]
[debug] [2025-08-31T00:23:45.926Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/289133861766 403
[debug] [2025-08-31T00:23:45.927Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/289133861766 {"error":{"code":403,"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766","containerInfo":"289133861766","consumer":"projects/289133861766","service":"compute.googleapis.com","serviceTitle":"Compute Engine API"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}]}]}}
[debug] [2025-08-31T00:23:45.927Z] unable to look up default compute service account. Falling back to 289133861766-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766","containerInfo":"289133861766","consumer":"projects/289133861766","service":"compute.googleapis.com","serviceTitle":"Compute Engine API"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/289133861766 had HTTP Error: 403, Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-08-31T00:23:45.927Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:45.927Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:45.927Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/289133861766 [none]
[debug] [2025-08-31T00:23:46.031Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/289133861766 403
[debug] [2025-08-31T00:23:46.031Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/289133861766 {"error":{"code":403,"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"serviceTitle":"Compute Engine API","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766","consumer":"projects/289133861766","service":"compute.googleapis.com","containerInfo":"289133861766"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}]}]}}
[debug] [2025-08-31T00:23:46.031Z] unable to look up default compute service account. Falling back to 289133861766-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"serviceTitle":"Compute Engine API","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766","consumer":"projects/289133861766","service":"compute.googleapis.com","containerInfo":"289133861766"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/289133861766 had HTTP Error: 403, Compute Engine API has not been used in project 289133861766 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=289133861766 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[info] i  functions: ensuring 289133861766-compute@developer.gserviceaccount.com access to secret SENDGRID_API_KEY. 
[debug] [2025-08-31T00:23:46.032Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:46.032Z] Checked if tokens are valid: true, expires at: 1756602805101
[info] i  functions: ensuring 289133861766-compute@developer.gserviceaccount.com access to secret NOTIFY_TO. 
[debug] [2025-08-31T00:23:46.032Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:46.032Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:46.032Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY:getIamPolicy [none]
[debug] [2025-08-31T00:23:46.032Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO:getIamPolicy [none]
[debug] [2025-08-31T00:23:46.324Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY:getIamPolicy 200
[debug] [2025-08-31T00:23:46.324Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY:getIamPolicy {"etag":"ACAB"}
[debug] [2025-08-31T00:23:46.325Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:46.325Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:46.325Z] >>> [apiv2][query] POST https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY:setIamPolicy [none]
[debug] [2025-08-31T00:23:46.325Z] >>> [apiv2][body] POST https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY:setIamPolicy {"policy":{"bindings":[{"role":"roles/secretmanager.secretAccessor","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com"]}]},"updateMask":"bindings"}
[debug] [2025-08-31T00:23:46.326Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO:getIamPolicy 200
[debug] [2025-08-31T00:23:46.326Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO:getIamPolicy {"etag":"ACAB"}
[debug] [2025-08-31T00:23:46.326Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:46.326Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:46.326Z] >>> [apiv2][query] POST https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO:setIamPolicy [none]
[debug] [2025-08-31T00:23:46.326Z] >>> [apiv2][body] POST https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO:setIamPolicy {"policy":{"bindings":[{"role":"roles/secretmanager.secretAccessor","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com"]}]},"updateMask":"bindings"}
[debug] [2025-08-31T00:23:46.701Z] <<< [apiv2][status] POST https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO:setIamPolicy 200
[debug] [2025-08-31T00:23:46.701Z] <<< [apiv2][body] POST https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/NOTIFY_TO:setIamPolicy {"version":1,"etag":"BwY9nkSuuMI=","bindings":[{"role":"roles/secretmanager.secretAccessor","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com"]}]}
[info] âœ”  secretmanager: Granted roles/secretmanager.secretAccessor on projects/mda-database/secrets/NOTIFY_TO to 289133861766-compute@developer.gserviceaccount.com 
[info] âœ”  functions: ensured 289133861766-compute@developer.gserviceaccount.com access to NOTIFY_TO. 
[debug] [2025-08-31T00:23:46.753Z] <<< [apiv2][status] POST https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY:setIamPolicy 200
[debug] [2025-08-31T00:23:46.753Z] <<< [apiv2][body] POST https://secretmanager.googleapis.com/v1/projects/mda-database/secrets/SENDGRID_API_KEY:setIamPolicy {"version":1,"etag":"BwY9nkSvcr4=","bindings":[{"role":"roles/secretmanager.secretAccessor","members":["serviceAccount:289133861766-compute@developer.gserviceaccount.com"]}]}
[info] âœ”  secretmanager: Granted roles/secretmanager.secretAccessor on projects/mda-database/secrets/SENDGRID_API_KEY to 289133861766-compute@developer.gserviceaccount.com 
[info] âœ”  functions: ensured 289133861766-compute@developer.gserviceaccount.com access to SENDGRID_API_KEY. 
[debug] [2025-08-31T00:23:46.754Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:46.754Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:46.754Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/mda-database/billingInfo [none]
[debug] [2025-08-31T00:23:47.268Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/mda-database/billingInfo 200
[debug] [2025-08-31T00:23:47.268Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/mda-database/billingInfo {"name":"projects/mda-database/billingInfo","projectId":"mda-database","billingAccountName":"billingAccounts/01D01F-420ADB-81D5DC","billingEnabled":true}
[debug] [2025-08-31T00:23:47.271Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:47.271Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:47.271Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-08-31T00:23:47.783Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-08-31T00:23:47.783Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-289133861766.us-central1.cloudfunctions.appspot.com/7afd5d47-c1ed-4ef3-b721-23f8b4b892be.zip?GoogleAccessId=service-289133861766@gcf-admin-robot.iam.gserviceaccount.com&Expires=1756601627&Signature=hxseCWYn3M0jTAeQ89ou0wfUYMp%2BcBQ4vexm0UFDZm6RI5BhqhOGc42o6JV06dPodMZpWt3F7096WZssmXO7%2BvsbYsgTiFMx%2B5lOMhQIBmf1pWYCw2cZSE66A4LRRSNaiDzLVdi%2F5OUUt0fN50%2BO1Zi%2FPNBtTiG4QJh%2BS6yggjurNl5RWts3wbVCQch6kw1%2BZPkMJqd4p3eH9Ax7uV9Vmdqno4qd2%2BCF8q6uOqSTLrjgEcCLO8nq37kttMiHgTCukCCMDTUSXd9wJc6Bdw5EZuKUwoEcW5%2Bw%2F1oXJwEaYk%2FURfvTq9pooy5gWpYwnM0wu1cVUSHYZJdTKZg8d8PVPQ%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-289133861766.us-central1.cloudfunctions.appspot.com","object":"7afd5d47-c1ed-4ef3-b721-23f8b4b892be.zip"}}
[debug] [2025-08-31T00:23:47.784Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-289133861766.us-central1.cloudfunctions.appspot.com/7afd5d47-c1ed-4ef3-b721-23f8b4b892be.zip GoogleAccessId=service-289133861766%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1756601627&Signature=hxseCWYn3M0jTAeQ89ou0wfUYMp%2BcBQ4vexm0UFDZm6RI5BhqhOGc42o6JV06dPodMZpWt3F7096WZssmXO7%2BvsbYsgTiFMx%2B5lOMhQIBmf1pWYCw2cZSE66A4LRRSNaiDzLVdi%2F5OUUt0fN50%2BO1Zi%2FPNBtTiG4QJh%2BS6yggjurNl5RWts3wbVCQch6kw1%2BZPkMJqd4p3eH9Ax7uV9Vmdqno4qd2%2BCF8q6uOqSTLrjgEcCLO8nq37kttMiHgTCukCCMDTUSXd9wJc6Bdw5EZuKUwoEcW5%2Bw%2F1oXJwEaYk%2FURfvTq9pooy5gWpYwnM0wu1cVUSHYZJdTKZg8d8PVPQ%3D%3D
[debug] [2025-08-31T00:23:47.784Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-289133861766.us-central1.cloudfunctions.appspot.com/7afd5d47-c1ed-4ef3-b721-23f8b4b892be.zip [stream]
[debug] [2025-08-31T00:23:48.330Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-289133861766.us-central1.cloudfunctions.appspot.com/7afd5d47-c1ed-4ef3-b721-23f8b4b892be.zip 200
[debug] [2025-08-31T00:23:48.331Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-289133861766.us-central1.cloudfunctions.appspot.com/7afd5d47-c1ed-4ef3-b721-23f8b4b892be.zip [omitted]
[info] âœ”  functions: functions folder uploaded successfully 
[info] i  functions: creating Node.js 20 (2nd Gen) function notifyOnNewComment(us-central1)... 
[info] i  functions: creating Node.js 20 (2nd Gen) function notifyOnNewTask(us-central1)... 
[info] i  functions: creating Node.js 20 (2nd Gen) function notifyOnProjectStatusChange(us-central1)... 
[info] i  functions: updating Node.js 20 (2nd Gen) function webhookHandler(us-central1)... 
[debug] [2025-08-31T00:23:48.338Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:48.338Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:23:48.339Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions functionId=notifyOnNewComment
[debug] [2025-08-31T00:23:48.339Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions {"name":"projects/mda-database/locations/us-central1/functions/notifyOnNewComment","buildConfig":{"runtime":"nodejs20","entryPoint":"notifyOnNewComment","source":{"storageSource":{"bucket":"gcf-v2-uploads-289133861766.us-central1.cloudfunctions.appspot.com","object":"7afd5d47-c1ed-4ef3-b721-23f8b4b892be.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/notifyOnNewComment","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"notifyOnNewComment","LOG_EXECUTION_ID":"true"},"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","secret":"SENDGRID_API_KEY","projectId":"mda-database","version":"2"},{"key":"NOTIFY_TO","secret":"NOTIFY_TO","projectId":"mda-database","version":"2"}],"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{uid}/projects/{projectId}/comments/{commentId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2025-08-31T00:24:04.159Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions 400
[debug] [2025-08-31T00:24:04.159Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions {"error":{"code":400,"message":"Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonnewcomment-529692: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.","status":"FAILED_PRECONDITION"}}
[warn] âš   functions: Request to https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions?functionId=notifyOnNewComment had HTTP Error: 400, Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonnewcomment-529692: Invalid resource state for "": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role. 
[warn] âš   functions: Since this is your first time using 2nd gen functions, we need a little bit longer to finish setting everything up. Retry the deployment in a few minutes. 
[warn] âš   functions:  failed to create function projects/mda-database/locations/us-central1/functions/notifyOnNewComment 
[error] Failed to create function projects/mda-database/locations/us-central1/functions/notifyOnNewComment
[debug] [2025-08-31T00:24:04.160Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:04.160Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:04.160Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:04.160Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:04.161Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:04.161Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:04.161Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions functionId=notifyOnNewTask
[debug] [2025-08-31T00:24:04.161Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions {"name":"projects/mda-database/locations/us-central1/functions/notifyOnNewTask","buildConfig":{"runtime":"nodejs20","entryPoint":"notifyOnNewTask","source":{"storageSource":{"bucket":"gcf-v2-uploads-289133861766.us-central1.cloudfunctions.appspot.com","object":"7afd5d47-c1ed-4ef3-b721-23f8b4b892be.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/notifyOnNewTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"notifyOnNewTask","LOG_EXECUTION_ID":"true"},"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","secret":"SENDGRID_API_KEY","projectId":"mda-database","version":"2"},{"key":"NOTIFY_TO","secret":"NOTIFY_TO","projectId":"mda-database","version":"2"}],"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{uid}/projects/{projectId}/tasks/{taskId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2025-08-31T00:24:04.162Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions functionId=notifyOnProjectStatusChange
[debug] [2025-08-31T00:24:04.162Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions {"name":"projects/mda-database/locations/us-central1/functions/notifyOnProjectStatusChange","buildConfig":{"runtime":"nodejs20","entryPoint":"notifyOnProjectStatusChange","source":{"storageSource":{"bucket":"gcf-v2-uploads-289133861766.us-central1.cloudfunctions.appspot.com","object":"7afd5d47-c1ed-4ef3-b721-23f8b4b892be.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/notifyOnProjectStatusChange","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"notifyOnProjectStatusChange","LOG_EXECUTION_ID":"true"},"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","secret":"SENDGRID_API_KEY","projectId":"mda-database","version":"2"},{"key":"NOTIFY_TO","secret":"NOTIFY_TO","projectId":"mda-database","version":"2"}],"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.updated","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{uid}/projects/{projectId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2025-08-31T00:24:04.163Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions/webhookHandler updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.secretEnvironmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels
[debug] [2025-08-31T00:24:04.163Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions/webhookHandler {"name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-uploads-289133861766.us-central1.cloudfunctions.appspot.com","object":"7afd5d47-c1ed-4ef3-b721-23f8b4b892be.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","secret":"SENDGRID_API_KEY","projectId":"mda-database","version":"2"},{"key":"NOTIFY_TO","secret":"NOTIFY_TO","projectId":"mda-database","version":"2"}],"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"}}
[debug] [2025-08-31T00:24:05.692Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions/webhookHandler 200
[debug] [2025-08-31T00:24:05.692Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions/webhookHandler {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-08-31T00:24:05.693Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:05.693Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:05.693Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:24:06.101Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:24:06.101Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2025-08-31T00:24:06.603Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:24:06.604Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:06.604Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:06.604Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:24:06.849Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:24:06.849Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":false}
[debug] [2025-08-31T00:24:07.850Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:24:07.852Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:07.852Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:07.852Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:24:08.252Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:24:08.252Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":false}
[debug] [2025-08-31T00:24:10.254Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:24:10.254Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:10.254Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:10.254Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:24:10.487Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:24:10.488Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":false}
[debug] [2025-08-31T00:24:14.490Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:24:14.490Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:14.490Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:14.490Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:24:14.907Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:24:14.907Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":false}
[debug] [2025-08-31T00:24:19.505Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions 400
[debug] [2025-08-31T00:24:19.505Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions {"error":{"code":400,"message":"Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonprojectstatuschange-336878: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.","status":"FAILED_PRECONDITION"}}
[warn] âš   functions: Request to https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions?functionId=notifyOnProjectStatusChange had HTTP Error: 400, Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonprojectstatuschange-336878: Invalid resource state for "": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role. 
[warn] âš   functions: Since this is your first time using 2nd gen functions, we need a little bit longer to finish setting everything up. Retry the deployment in a few minutes. 
[warn] âš   functions:  failed to create function projects/mda-database/locations/us-central1/functions/notifyOnProjectStatusChange 
[error] Failed to create function projects/mda-database/locations/us-central1/functions/notifyOnProjectStatusChange
[debug] [2025-08-31T00:24:19.633Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions 400
[debug] [2025-08-31T00:24:19.633Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions {"error":{"code":400,"message":"Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonnewtask-779378: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.","status":"FAILED_PRECONDITION"}}
[warn] âš   functions: Request to https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions?functionId=notifyOnNewTask had HTTP Error: 400, Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonnewtask-779378: Invalid resource state for "": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role. 
[warn] âš   functions: Since this is your first time using 2nd gen functions, we need a little bit longer to finish setting everything up. Retry the deployment in a few minutes. 
[warn] âš   functions:  failed to create function projects/mda-database/locations/us-central1/functions/notifyOnNewTask 
[error] Failed to create function projects/mda-database/locations/us-central1/functions/notifyOnNewTask
[debug] [2025-08-31T00:24:22.911Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:24:22.911Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:22.911Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:22.911Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:24:23.288Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:24:23.288Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":false}
[debug] [2025-08-31T00:24:33.288Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:24:33.289Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:33.289Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:33.289Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:24:33.671Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:24:33.671Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":false}
[debug] [2025-08-31T00:24:43.673Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:24:43.673Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:43.673Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:43.673Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:24:44.097Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:24:44.097Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":false}
[debug] [2025-08-31T00:24:54.099Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:24:54.099Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:54.099Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:24:54.099Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:24:54.514Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:24:54.514Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":false}
[debug] [2025-08-31T00:25:04.515Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:25:04.516Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:25:04.516Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:25:04.516Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:25:04.982Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:25:04.982Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":false}
[debug] [2025-08-31T00:25:14.983Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:25:14.984Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:25:14.984Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:25:14.984Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:25:15.527Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:25:15.528Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/mda-database/locations/us-central1/services/webhookhandler","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/webhookhandler?project=mda-database","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]}],"sourceToken":"Cldwcm9qZWN0cy8yODkxMzM4NjE3NjYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8xNzZhMDFhNi1hOGJiLTQ1ZmItOTJhNS1iYTA0NWZlMWZkOTESbHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21kYS1kYXRhYmFzZS9nY2YtYXJ0aWZhY3RzL21kYS0tZGF0YWJhc2VfX3VzLS1jZW50cmFsMV9fd2ViaG9va19oYW5kbGVyOnZlcnNpb25fMRiGt+KNtQgiRHByb2plY3RzL21kYS1kYXRhYmFzZS9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3dlYmhvb2tIYW5kbGVyKgwI4KzOxQYQsJ/vrgMyCG5vZGVqczIwOnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMjA6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczIwQAE=","operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":false}
[debug] [2025-08-31T00:25:15.528Z] Got source token Cldwcm9qZWN0cy8yODkxMzM4NjE3NjYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8xNzZhMDFhNi1hOGJiLTQ1ZmItOTJhNS1iYTA0NWZlMWZkOTESbHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21kYS1kYXRhYmFzZS9nY2YtYXJ0aWZhY3RzL21kYS0tZGF0YWJhc2VfX3VzLS1jZW50cmFsMV9fd2ViaG9va19oYW5kbGVyOnZlcnNpb25fMRiGt+KNtQgiRHByb2plY3RzL21kYS1kYXRhYmFzZS9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3dlYmhvb2tIYW5kbGVyKgwI4KzOxQYQsJ/vrgMyCG5vZGVqczIwOnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMjA6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczIwQAE= for region us-central1
[debug] [2025-08-31T00:25:25.529Z] [update-default-us-central1-webhookHandler] Retrying task index 0
[debug] [2025-08-31T00:25:25.529Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:25:25.529Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:25:25.529Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 [none]
[debug] [2025-08-31T00:25:25.958Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 200
[debug] [2025-08-31T00:25:25.958Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39 {"name":"projects/mda-database/locations/us-central1/operations/operation-1756599844568-63d9e45bf7de3-5dc0a74a-6d333f39","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-31T00:24:05.590378797Z","endTime":"2025-08-31T00:25:17.458605557Z","target":"projects/mda-database/locations/us-central1/functions/webhookHandler","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1755964489421718"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00009-mex","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/176a01a6-a8bb-45fb-92a5-ba045fe1fd91?project=289133861766"},{"name":"SERVICE","message":"Updating Cloud Run service","state":"COMPLETE","resource":"projects/mda-database/locations/us-central1/services/webhookhandler","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/webhookhandler?project=mda-database","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]}],"sourceToken":"Cldwcm9qZWN0cy8yODkxMzM4NjE3NjYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8xNzZhMDFhNi1hOGJiLTQ1ZmItOTJhNS1iYTA0NWZlMWZkOTESbHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21kYS1kYXRhYmFzZS9nY2YtYXJ0aWZhY3RzL21kYS0tZGF0YWJhc2VfX3VzLS1jZW50cmFsMV9fd2ViaG9va19oYW5kbGVyOnZlcnNpb25fMRiGt+KNtQgiRHByb2plY3RzL21kYS1kYXRhYmFzZS9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3dlYmhvb2tIYW5kbGVyKgwI4KzOxQYQsJ/vrgMyCG5vZGVqczIwOnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMjA6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczIwQAE=","operationType":"UPDATE_FUNCTION","buildName":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91"},"done":true,"response":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/mda-database/locations/us-central1/functions/webhookHandler","buildConfig":{"build":"projects/289133861766/locations/us-central1/builds/176a01a6-a8bb-45fb-92a5-ba045fe1fd91","runtime":"nodejs20","entryPoint":"webhookHandler","source":{"storageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-289133861766-us-central1","object":"webhookHandler/function-source.zip","generation":"1756599845529924"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/mda-database/serviceAccounts/289133861766-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/mda-database/locations/us-central1/services/webhookhandler","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}","GCLOUD_PROJECT":"mda-database","EVENTARC_CLOUD_EVENT_SOURCE":"projects/mda-database/locations/us-central1/services/webhookHandler","FUNCTION_TARGET":"webhookHandler","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://webhookhandler-6zeyidlb7q-uc.a.run.app","serviceAccountEmail":"289133861766-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"SENDGRID_API_KEY","projectId":"mda-database","secret":"SENDGRID_API_KEY","version":"2"},{"key":"NOTIFY_TO","projectId":"mda-database","secret":"NOTIFY_TO","version":"2"}],"revision":"webhookhandler-00010-hix","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-08-31T00:24:05.593812207Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6d71e4275a5e118f51bea2ff0290664241f38904"},"environment":"GEN_2","url":"https://us-central1-mda-database.cloudfunctions.net/webhookHandler","createTime":"2025-08-22T21:15:42.040034541Z","satisfiesPzi":true}}
[debug] [2025-08-31T00:25:25.958Z] Got source token Cldwcm9qZWN0cy8yODkxMzM4NjE3NjYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8xNzZhMDFhNi1hOGJiLTQ1ZmItOTJhNS1iYTA0NWZlMWZkOTESbHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21kYS1kYXRhYmFzZS9nY2YtYXJ0aWZhY3RzL21kYS0tZGF0YWJhc2VfX3VzLS1jZW50cmFsMV9fd2ViaG9va19oYW5kbGVyOnZlcnNpb25fMRiGt+KNtQgiRHByb2plY3RzL21kYS1kYXRhYmFzZS9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3dlYmhvb2tIYW5kbGVyKgwI4KzOxQYQsJ/vrgMyCG5vZGVqczIwOnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMjA6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczIwQAE= for region us-central1
[info] âœ”  functions[webhookHandler(us-central1)] Successful update operation. 
[debug] [2025-08-31T00:25:25.962Z] Total Function Deployment time: 97623
[debug] [2025-08-31T00:25:25.962Z] 4 Functions Deployed
[debug] [2025-08-31T00:25:25.962Z] 3 Functions Errored
[debug] [2025-08-31T00:25:25.962Z] 0 Function Deployments Aborted
[debug] [2025-08-31T00:25:25.962Z] Average Function Deployment time: 43978
[info] 
[info] Functions deploy had errors with the following functions:
	notifyOnNewComment(us-central1)
	notifyOnNewTask(us-central1)
	notifyOnProjectStatusChange(us-central1)
[info] Function URL (webhookHandler(us-central1)): https://webhookhandler-6zeyidlb7q-uc.a.run.app
[debug] [2025-08-31T00:25:26.210Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:25:26.210Z] Checked if tokens are valid: true, expires at: 1756602805101
[debug] [2025-08-31T00:25:26.210Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/mda-database/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-08-31T00:25:26.723Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/mda-database/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-08-31T00:25:26.723Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/mda-database/locations/us-central1/repositories/gcf-artifacts {"name":"projects/mda-database/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-08-22T20:44:14.145582Z","updateTime":"2025-08-31T00:24:58.262278Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"92974596","vulnerabilityScanningConfig":{"lastEnableTime":"2025-08-22T20:44:05.753251591Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/mda-database/gcf-artifacts"}
[debug] [2025-08-31T00:25:26.724Z] Functions deploy failed.
[debug] [2025-08-31T00:25:26.724Z] {
  "endpoint": {
    "id": "notifyOnNewComment",
    "project": "mda-database",
    "region": "us-central1",
    "entryPoint": "notifyOnNewComment",
    "platform": "gcfv2",
    "runtime": "nodejs20",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "users/{uid}/projects/{projectId}/comments/{commentId}"
      },
      "region": "nam5"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "secretEnvironmentVariables": [
      {
        "key": "SENDGRID_API_KEY",
        "secret": "SENDGRID_API_KEY",
        "projectId": "mda-database",
        "version": "2"
      },
      {
        "key": "NOTIFY_TO",
        "secret": "NOTIFY_TO",
        "projectId": "mda-database",
        "version": "2"
      }
    ],
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "mda-database",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/mda-database/locations/us-central1/services/notifyOnNewComment"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "6d71e4275a5e118f51bea2ff0290664241f38904"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/mda-database/locations/us-central1/functions/notifyOnNewComment"
    },
    "exit": 1,
    "message": "Failed to create function projects/mda-database/locations/us-central1/functions/notifyOnNewComment",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonnewcomment-529692: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.",
            "status": "FAILED_PRECONDITION"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions?functionId=notifyOnNewComment had HTTP Error: 400, Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonnewcomment-529692: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2025-08-31T00:25:26.724Z] {
  "endpoint": {
    "id": "notifyOnProjectStatusChange",
    "project": "mda-database",
    "region": "us-central1",
    "entryPoint": "notifyOnProjectStatusChange",
    "platform": "gcfv2",
    "runtime": "nodejs20",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.updated",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "users/{uid}/projects/{projectId}"
      },
      "region": "nam5"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "secretEnvironmentVariables": [
      {
        "key": "SENDGRID_API_KEY",
        "secret": "SENDGRID_API_KEY",
        "projectId": "mda-database",
        "version": "2"
      },
      {
        "key": "NOTIFY_TO",
        "secret": "NOTIFY_TO",
        "projectId": "mda-database",
        "version": "2"
      }
    ],
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "mda-database",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/mda-database/locations/us-central1/services/notifyOnProjectStatusChange"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "6d71e4275a5e118f51bea2ff0290664241f38904"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/mda-database/locations/us-central1/functions/notifyOnProjectStatusChange"
    },
    "exit": 1,
    "message": "Failed to create function projects/mda-database/locations/us-central1/functions/notifyOnProjectStatusChange",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonprojectstatuschange-336878: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.",
            "status": "FAILED_PRECONDITION"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions?functionId=notifyOnProjectStatusChange had HTTP Error: 400, Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonprojectstatuschange-336878: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2025-08-31T00:25:26.724Z] {
  "endpoint": {
    "id": "notifyOnNewTask",
    "project": "mda-database",
    "region": "us-central1",
    "entryPoint": "notifyOnNewTask",
    "platform": "gcfv2",
    "runtime": "nodejs20",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "users/{uid}/projects/{projectId}/tasks/{taskId}"
      },
      "region": "nam5"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "secretEnvironmentVariables": [
      {
        "key": "SENDGRID_API_KEY",
        "secret": "SENDGRID_API_KEY",
        "projectId": "mda-database",
        "version": "2"
      },
      {
        "key": "NOTIFY_TO",
        "secret": "NOTIFY_TO",
        "projectId": "mda-database",
        "version": "2"
      }
    ],
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"mda-database\",\"storageBucket\":\"mda-database.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "mda-database",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/mda-database/locations/us-central1/services/notifyOnNewTask"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "6d71e4275a5e118f51bea2ff0290664241f38904"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/mda-database/locations/us-central1/functions/notifyOnNewTask"
    },
    "exit": 1,
    "message": "Failed to create function projects/mda-database/locations/us-central1/functions/notifyOnNewTask",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonnewtask-779378: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.",
            "status": "FAILED_PRECONDITION"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v2/projects/mda-database/locations/us-central1/functions?functionId=notifyOnNewTask had HTTP Error: 400, Validation failed for trigger projects/mda-database/locations/nam5/triggers/notifyonnewtask-779378: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[error] Error: There was an error deploying functions:
[error] - Error Failed to create function notifyOnNewComment in region us-central1
[error] - Error Failed to create function notifyOnProjectStatusChange in region us-central1
[error] - Error Failed to create function notifyOnNewTask in region us-central1
